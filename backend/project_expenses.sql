--------------------------------------------------------
--  Fichier créé - jeudi-août-28-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table EXPENSES
--------------------------------------------------------

  CREATE TABLE "SYSTEM"."EXPENSES" 
   (	"ID" NUMBER, 
	"USER_ID" NUMBER, 
	"DESCRIPTION" VARCHAR2(255 BYTE), 
	"AMOUNT" NUMBER(10,2), 
	"CATEGORY" VARCHAR2(50 BYTE), 
	"EXPENSE_DATE" DATE, 
	"CREATED_AT" TIMESTAMP (6) DEFAULT CURRENT_TIMESTAMP, 
	"UPDATED_AT" TIMESTAMP (6) DEFAULT CURRENT_TIMESTAMP
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "SYSTEM"."USERS" 
   (	"ID" NUMBER(*,0), 
	"USERNAME" VARCHAR2(50 BYTE), 
	"EMAIL" VARCHAR2(150 BYTE), 
	"CREATED_AT" TIMESTAMP (6), 
	"PASSWORD_HASH" VARCHAR2(255 BYTE)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into SYSTEM.EXPENSES
SET DEFINE OFF;
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('21','21','Courses chez Carrefour','45,5','Groceries',to_date('27/08/24','DD/MM/RR'),to_timestamp('28/08/25 12:53:47,729654000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 12:53:47,729654000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('32','21','Visite médicale','120','Health',to_date('10/07/25','DD/MM/RR'),to_timestamp('28/08/25 18:16:53,566250000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 18:16:53,566250000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('23','21','Courses au supermarché','75,2','Groceries',to_date('27/08/25','DD/MM/RR'),to_timestamp('28/08/25 12:59:59,731178000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 12:59:59,731178000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('24','21','Cinéma avec amis','25','Leisure',to_date('26/08/25','DD/MM/RR'),to_timestamp('28/08/25 13:00:05,810241000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 13:00:05,810241000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('25','21','Nouvelle souris gaming','59,99','Electronics',to_date('20/08/25','DD/MM/RR'),to_timestamp('28/08/25 13:00:13,729763000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 13:00:13,729763000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('26','21','Facture électricité','120,5','Utilities',to_date('01/08/25','DD/MM/RR'),to_timestamp('28/08/25 13:00:26,364127000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 13:00:26,364127000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('27','21','Nouveaux vêtements','150','Clothing',to_date('15/07/25','DD/MM/RR'),to_timestamp('28/08/25 13:00:32,798861000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 13:00:32,798861000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('28','21','Visite médicale','80','Health',to_date('10/06/25','DD/MM/RR'),to_timestamp('28/08/25 13:00:40,298161000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 13:00:40,298161000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('29','21','Cadeau d’anniversaire','45','Others',to_date('05/05/25','DD/MM/RR'),to_timestamp('28/08/25 13:00:49,170782000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 13:00:49,170782000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('30','21','Visite médicale','120','Health',to_date('10/07/25','DD/MM/RR'),to_timestamp('28/08/25 17:47:23,815276000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 17:47:23,815276000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('31','21','Visite médicale','150','Health',to_date('10/08/25','DD/MM/RR'),to_timestamp('28/08/25 18:14:55,032763000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 18:14:55,032763000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('33','21','Visite santé','120','Health',to_date('10/07/25','DD/MM/RR'),to_timestamp('28/08/25 18:28:08,849716000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 18:28:08,849716000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('34','21','Visite postman','120','Health',to_date('10/08/25','DD/MM/RR'),to_timestamp('28/08/25 18:28:27,191680000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 18:28:27,191680000','DD/MM/RR HH24:MI:SSXFF'));
Insert into SYSTEM.EXPENSES (ID,USER_ID,DESCRIPTION,AMOUNT,CATEGORY,EXPENSE_DATE,CREATED_AT,UPDATED_AT) values ('35','21','Visite swagger','120','Health',to_date('10/08/25','DD/MM/RR'),to_timestamp('28/08/25 18:32:50,734435000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('28/08/25 18:32:50,734435000','DD/MM/RR HH24:MI:SSXFF'));
REM INSERTING into SYSTEM.USERS
SET DEFINE OFF;
Insert into SYSTEM.USERS (ID,USERNAME,EMAIL,CREATED_AT,PASSWORD_HASH) values ('1','john','john@test.com',to_timestamp('23/08/25 15:52:01,862000000','DD/MM/RR HH24:MI:SSXFF'),'$2a$10$hash_factice_pour_test');
Insert into SYSTEM.USERS (ID,USERNAME,EMAIL,CREATED_AT,PASSWORD_HASH) values ('2','emili','emili@test.com',to_timestamp('23/08/25 15:53:06,998000000','DD/MM/RR HH24:MI:SSXFF'),'$7o$10$hash_factice_pour_test');
Insert into SYSTEM.USERS (ID,USERNAME,EMAIL,CREATED_AT,PASSWORD_HASH) values ('21','testuser','test@example.com',to_timestamp('27/08/25 12:03:47,734483000','DD/MM/RR HH24:MI:SSXFF'),'$2a$10$i9FAsPmlRdFi5K7m/.NkZ.M5Q3vxhesFToBKQikdE.HFuaGF9V33y');
Insert into SYSTEM.USERS (ID,USERNAME,EMAIL,CREATED_AT,PASSWORD_HASH) values ('41','admin','admin@example.com',to_timestamp('28/08/25 17:29:44,207727000','DD/MM/RR HH24:MI:SSXFF'),'$2a$10$lNxmw1HSmNsRfmbFEG7WE.5G3vZKDgArFiXw4dYNOMsHVSs2CzzZa');
--------------------------------------------------------
--  DDL for Index SYS_C008333
--------------------------------------------------------

  CREATE UNIQUE INDEX "SYSTEM"."SYS_C008333" ON "SYSTEM"."EXPENSES" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index IDX_EXPENSES_USER_ID
--------------------------------------------------------

  CREATE INDEX "SYSTEM"."IDX_EXPENSES_USER_ID" ON "SYSTEM"."EXPENSES" ("USER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index IDX_EXPENSES_DATE
--------------------------------------------------------

  CREATE INDEX "SYSTEM"."IDX_EXPENSES_DATE" ON "SYSTEM"."EXPENSES" ("EXPENSE_DATE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index USERS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "SYSTEM"."USERS_PK" ON "SYSTEM"."USERS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index USERS_UNIQUE_EMAIL
--------------------------------------------------------

  CREATE UNIQUE INDEX "SYSTEM"."USERS_UNIQUE_EMAIL" ON "SYSTEM"."USERS" ("EMAIL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index UNIQUE_USERNAME
--------------------------------------------------------

  CREATE UNIQUE INDEX "SYSTEM"."UNIQUE_USERNAME" ON "SYSTEM"."USERS" ("USERNAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  Constraints for Table EXPENSES
--------------------------------------------------------

  ALTER TABLE "SYSTEM"."EXPENSES" MODIFY ("USER_ID" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."EXPENSES" MODIFY ("DESCRIPTION" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."EXPENSES" MODIFY ("AMOUNT" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."EXPENSES" MODIFY ("CATEGORY" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."EXPENSES" MODIFY ("EXPENSE_DATE" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."EXPENSES" ADD CONSTRAINT "CHK_AMOUNT_POSITIVE" CHECK (amount > 0) ENABLE;
  ALTER TABLE "SYSTEM"."EXPENSES" ADD CONSTRAINT "CHK_CATEGORY" CHECK (category IN ('Groceries', 'Leisure', 'Electronics', 'Utilities', 'Clothing', 'Health', 'Others')) ENABLE;
  ALTER TABLE "SYSTEM"."EXPENSES" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Constraints for Table USERS
--------------------------------------------------------

  ALTER TABLE "SYSTEM"."USERS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."USERS" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."USERS" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."USERS" MODIFY ("CREATED_AT" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."USERS" MODIFY ("PASSWORD_HASH" NOT NULL ENABLE);
  ALTER TABLE "SYSTEM"."USERS" ADD CONSTRAINT "USERS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "SYSTEM"."USERS" ADD CONSTRAINT "USERS_UNIQUE_EMAIL" UNIQUE ("EMAIL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "SYSTEM"."USERS" ADD CONSTRAINT "USERS_UNIQUE_USERNAME" UNIQUE ("USERNAME")
  USING INDEX (CREATE UNIQUE INDEX "SYSTEM"."UNIQUE_USERNAME" ON "SYSTEM"."USERS" ("USERNAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" )  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table EXPENSES
--------------------------------------------------------

  ALTER TABLE "SYSTEM"."EXPENSES" ADD CONSTRAINT "FK_EXPENSE_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "SYSTEM"."USERS" ("ID") ON DELETE CASCADE ENABLE;
